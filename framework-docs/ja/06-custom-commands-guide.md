# カスタムコマンドガイド

玄人開発で使用するカスタムコマンド（スラッシュコマンド）の一覧と使い方です。

---

## 目次

1. [概要](#1-概要)
2. [インストール](#2-インストール)
3. [仕様フェーズ](#3-仕様フェーズ)
4. [計画・実装フェーズ](#4-計画実装フェーズ)
5. [品質保証フェーズ](#5-品質保証フェーズ)
6. [Git操作](#6-git操作)
7. [統合ワークフロー](#7-統合ワークフロー)
8. [保守・運用](#8-保守運用)
9. [コマンド配置場所](#9-コマンド配置場所)

---

## 1. 概要

### 1.1 カスタムコマンドとは

カスタムコマンドは、繰り返し行う作業を自動化・標準化するためのスラッシュコマンドです。`~/.claude/commands/` にMarkdownファイルとして配置することで、どのプロジェクトでも利用できます。

### 1.2 設計思想

| 原則 | 説明 |
|------|------|
| **言語非依存** | 特定のプログラミング言語やフレームワークに依存しない |
| **プロセス標準化** | 誰が実行しても同じ品質の成果物が得られる |
| **自動化優先** | 手作業を減らし、人的ミスを防ぐ |
| **段階的実行** | 各フェーズで確認を挟み、事故を防ぐ |

### 1.3 開発フローとコマンドの対応

```
仕様策定 → 計画作成 → 実装 → テスト → コミット → PR → レビュー対応
   │          │        │       │        │       │        │
/spec:init  /plan:make /impl:run /qa:full /git:commit /git:pr /fixup-from-pr-comments
/spec:review
```

---

## 2. インストール

### 2.1 前提条件

- Claude Code がインストールされていること
- clauto-develop リポジトリをクローン済み

### 2.2 グローバルインストール

すべてのプロジェクトでカスタムコマンドを使用するには、以下のコマンドを実行します：

```bash
# clauto-develop リポジトリのルートディレクトリで実行
mkdir -p ~/.claude/commands
cp global-commands/*.md ~/.claude/commands/
```

### 2.3 インストール確認

Claude Code を起動し、以下のコマンドが認識されることを確認します：

```
/spec:init
/git:commit
```

コマンド一覧は `/help` で確認できます。

### 2.4 アンインストール

```bash
rm ~/.claude/commands/*.md
```

---

## 3. 仕様フェーズ

### 3.1 /spec:init - 仕様書テンプレート生成

| 項目 | 内容 |
|------|------|
| **目的** | `docs/spec.md` をテンプレートから生成 |
| **自動化内容** | Specテンプレ生成、TODO コメント挿入 |
| **汎用性** | スペック駆動開発の起点として、すべてのプロジェクトで使用可能 |

**使用例:**
```
/spec:init
```

**生成されるテンプレート:**
- 概要（背景、目的、スコープ）
- 機能要件（機能一覧、詳細仕様）
- 非機能要件（パフォーマンス、セキュリティ等）
- 技術構成
- データ設計
- 制約・前提条件

### 3.2 /spec:review - 仕様書レビュー

| 項目 | 内容 |
|------|------|
| **目的** | 仕様書の品質を一定の基準でチェック |
| **自動化内容** | `docs/spec.md` を読み込み、問題点を箇条書きで出力 |
| **汎用性** | 仕様の曖昧さはすべての開発で発生する課題 |

**使用例:**
```
/spec:review
```

**チェック項目:**
- 完全性（TODO残存、必須セクションの充足）
- 明確性（曖昧表現、定量化）
- 一貫性（用語統一、ID採番）
- 実装可能性（技術的実現性）
- テスト可能性（受け入れ基準）

---

## 4. 計画・実装フェーズ

### 4.1 /plan:make - 実装計画作成

| 項目 | 内容 |
|------|------|
| **目的** | 仕様書から実装タスク一覧を作成 |
| **自動化内容** | タスク分解、実装順序・依存関係の明示 |
| **汎用性** | 規模に関係なく「いきなり実装」を防げる |

**使用例:**
```
/plan:make
```

**出力内容:**
- マイルストーン
- タスク一覧（ID、カテゴリ、依存関係、優先度）
- タスク詳細（概要、成果物、完了条件）
- 依存関係図

### 4.2 /impl:run - タスク実装実行

| 項目 | 内容 |
|------|------|
| **目的** | 計画に沿って実装を開始 |
| **自動化内容** | 指定タスクの実装、ファイル作成・編集 |
| **汎用性** | 実装フェーズはどのプロジェクトにも存在 |

**使用例:**
```
/impl:run T-001
/impl:run T-001,T-002,T-003
```

**実行フロー:**
1. 依存タスクの完了確認
2. 実装実行
3. 検証（構文エラー、基本動作）
4. タスク状態更新

---

## 5. 品質保証フェーズ

### 5.1 /qa:full - フルテスト実行

| 項目 | 内容 |
|------|------|
| **目的** | テスト設計→実行→結果整理を一気に実行 |
| **自動化内容** | テストケース整理、テスト実行、失敗時レポート |
| **汎用性** | テスト忘れを構造的に防げる |

**使用例:**
```
/qa:full
```

**出力内容:**
- テストサマリー（成功/失敗/スキップ数）
- カバレッジ情報
- 失敗テストの詳細と修正案
- 仕様カバレッジ（機能ごとのテスト有無）

---

## 6. Git操作

### 6.1 /git:branch - ブランチ作成

| 項目 | 内容 |
|------|------|
| **目的** | 仕様ベースのブランチ作成 |
| **自動化内容** | ブランチ名提案、checkout |
| **汎用性** | Git運用がある限り必ず使う |

**使用例:**
```
/git:branch
/git:branch F-001
```

**ブランチ命名規則:**
- `feature/{issue-id}-{short-description}`
- `fix/{issue-id}-{short-description}`
- `refactor/{description}`

### 6.2 /git:commit - 規約準拠コミット

| 項目 | 内容 |
|------|------|
| **目的** | 日本語・規約準拠のコミットを作成 |
| **自動化内容** | diff要約、日本語コミットメッセージ生成、commit |
| **汎用性** | コミット品質を一定にできる |

**使用例:**
```
/git:commit
```

**コミットメッセージ形式:**
```
<type>: <subject>

<body>

<footer>
```

### 6.3 /git:pr - プルリクエスト作成

| 項目 | 内容 |
|------|------|
| **目的** | PR作成を標準化 |
| **自動化内容** | タイトル・本文生成、`gh pr create`、レビュー観点を含める |
| **汎用性** | PR品質＝チーム生産性 |

**使用例:**
```
/git:pr
```

**PR本文に含まれる内容:**
- 変更概要
- 関連Issue
- 変更内容・理由
- テスト手順
- レビュー観点
- チェックリスト

---

## 7. 統合ワークフロー

### 7.1 /gh:commit-push-pr - 統合版

| 項目 | 内容 |
|------|------|
| **目的** | 日常作業を1コマンドに集約 |
| **自動化内容** | commit → push → PR |
| **汎用性** | 最も使用頻度が高い「内側ループ」 |

**使用例:**
```
/gh:commit-push-pr
```

**実行フロー:**
1. 変更をコミット
2. リモートにプッシュ
3. PRを作成

### 7.2 /fixup-from-pr-comments - レビュー対応

| 項目 | 内容 |
|------|------|
| **目的** | レビュー対応を自動化 |
| **自動化内容** | PRコメント取得、修正、テスト、追コミット |
| **汎用性** | レビュー対応はどのチームでも発生 |

**使用例:**
```
/fixup-from-pr-comments
/fixup-from-pr-comments 123
```

**実行フロー:**
1. レビューコメント取得・分析
2. 修正計画作成
3. ユーザー確認
4. 修正実行
5. テスト・コミット

---

## 8. 保守・運用

### 8.1 /refactor:cleanup - コード整理

| 項目 | 内容 |
|------|------|
| **目的** | 振る舞いを変えない整理 |
| **自動化内容** | 冗長コード削減、命名改善、構造整理 |
| **汎用性** | 実装後の仕上げ工程として必須 |

**使用例:**
```
/refactor:cleanup
/refactor:cleanup src/services/
```

**リファクタリング項目:**
- 未使用コードの削除
- 命名改善
- 長い関数の分割
- マジックナンバーの定数化

### 8.2 /session:compact-smart - スマートコンパクト

| 項目 | 内容 |
|------|------|
| **目的** | 長時間セッションの事故防止 |
| **自動化内容** | `/compact` 実行、重要決定・次TODOを再記録 |
| **汎用性** | Claude Codeを長時間使うなら必須 |

**使用例:**
```
/session:compact-smart
```

**保存される情報:**
- プロジェクト状態（ブランチ、未コミット変更）
- 重要な決定事項
- TODO/次のアクション
- 注意事項

### 8.3 /ultrathink - 深い思考モード

| 項目 | 内容 |
|------|------|
| **目的** | 複雑な問題に対して深く多角的に思考 |
| **使用場面** | アーキテクチャ設計、トレードオフ分析、リスク評価 |
| **汎用性** | 重要な技術判断が必要な場面で使用 |

**使用例:**
```
/ultrathink
```

**思考プロセス:**
1. 問題の明確化
2. 多角的分析（技術、ビジネス、運用、セキュリティ）
3. 選択肢の列挙と比較
4. トレードオフ評価
5. リスク分析
6. 結論と推奨

---

## 9. コマンド配置場所

### 9.1 グローバルコマンド

すべてのプロジェクトで使用するコマンドは `~/.claude/commands/` に配置します。

```
~/.claude/commands/
├── spec-init.md
├── spec-review.md
├── plan-make.md
├── impl-run.md
├── qa-full.md
├── git-branch.md
├── git-commit.md
├── git-pr.md
├── gh:commit-push-pr.md
├── fixup-from-pr-comments.md
├── refactor-cleanup.md
├── session-compact-smart.md
└── ultrathink.md
```

### 9.2 プロジェクト固有コマンド

特定のプロジェクトでのみ使用するコマンドは `.claude/commands/` に配置します。

```
project/
└── .claude/
    └── commands/
        └── project-specific-command.md
```

### 9.3 コマンドファイルの形式

```markdown
# /command-name - コマンドの説明

コマンドの詳細な指示をここに記述します。

## 実行内容
1. [手順1]
2. [手順2]

## 出力形式
...
```

---

## コマンド一覧クイックリファレンス

| コマンド | フェーズ | 目的 |
|---------|---------|------|
| `/spec:init` | 仕様 | 仕様書テンプレート生成 |
| `/spec:review` | 仕様 | 仕様書品質チェック |
| `/plan:make` | 計画 | 実装タスク一覧作成 |
| `/impl:run` | 実装 | タスク実装実行 |
| `/qa:full` | 品質 | フルテスト実行 |
| `/git:branch` | Git | ブランチ作成 |
| `/git:commit` | Git | 規約準拠コミット |
| `/git:pr` | Git | PR作成 |
| `/gh:commit-push-pr` | Git | commit→push→PR統合 |
| `/fixup-from-pr-comments` | Git | レビュー対応 |
| `/refactor:cleanup` | 保守 | コード整理 |
| `/session:compact-smart` | 運用 | セッション整理 |
| `/ultrathink` | 分析 | 深い思考モード |

---

*このガイドは玄人開発フレームワークの一部です。*
