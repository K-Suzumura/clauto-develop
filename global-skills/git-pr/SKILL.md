---
name: git-pr
description: Create standardized pull request
user-invocable: true
allowed-tools: Bash
---

# /git:pr - プルリクエスト作成

標準化されたプルリクエストを作成してください。

## 実行内容

1. 現在のブランチと変更を確認
2. PR タイトル・本文を生成
3. ユーザー確認後に PR を作成

## 前提条件

- GitHub CLI (`gh`) がインストールされていること
- 認証済みであること

## PR テンプレート

```markdown
## 概要

[変更の概要を1-2文で]

## 関連 Issue

- Closes #XXX
- Related to #YYY

## 変更内容

- [変更1]
- [変更2]
- [変更3]

## 変更理由

[なぜこの変更が必要か]

## 変更の種類

- [ ] 新機能
- [ ] バグ修正
- [ ] リファクタリング
- [ ] ドキュメント
- [ ] テスト

## テスト

### 実施したテスト
- [ ] ユニットテスト
- [ ] 手動テスト

### テスト手順
1. [手順1]
2. [手順2]

## レビュー観点

<!-- レビュアーに特に見てほしいポイント -->
- [観点1]
- [観点2]

## チェックリスト

- [ ] コーディング規約に従っている
- [ ] テストを追加/更新した
- [ ] ドキュメントを更新した（必要な場合）
- [ ] セキュリティ上の問題がない
```

## 実行フロー

### 1. 状態確認
```bash
git status
git log origin/main..HEAD --oneline
```

### 2. プッシュ確認
- リモートにプッシュされていない場合はプッシュ

### 3. PR 情報生成
- コミット履歴から変更内容を抽出
- ブランチ名から関連機能を特定
- タイトルと本文を自動生成

### 4. ユーザー確認
```
生成した PR:
---
タイトル: feat: ユーザー認証機能を追加

本文:
[生成した本文]
---

1. この内容で PR を作成
2. 内容を編集
3. キャンセル
```

### 5. PR 作成
```bash
gh pr create --title "..." --body "..."
```

## 出力形式

```markdown
# PR 作成完了

- **PR番号**: #123
- **タイトル**: feat: ユーザー認証機能を追加
- **URL**: https://github.com/owner/repo/pull/123
- **ベースブランチ**: main
- **比較ブランチ**: feature/F-001-user-authentication

## 含まれるコミット
- abc1234: feat: ユーザー認証機能を追加
- def5678: test: 認証テストを追加

## 次のステップ
1. レビュアーにレビューを依頼
2. レビューコメントがあれば `/fixup-from-pr-comments` で対応
3. 承認後にマージ
```

## 注意事項

- ベースブランチが最新か確認を促す
- ドラフト PR の選択肢を提供
- レビュー観点は具体的に記載
